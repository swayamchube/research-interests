\section{Fundamental Groupoid and Group}

\begin{definition}[Homotopy]
    Let $X$ and $Y$ be topological spaces. A homotopy is a continuous function $H: X\times I\to Y$. A \textit{homotopy} between two functions $f,g: X\to Y$ is a continuous map $H: X\times I\to Y$ such that $H(x,0) = f(x)$ and $H(x, 1) = g(x)$.
\end{definition}

\begin{definition}[Homotopy of Paths]
    Let $X$ be a topological space and $f,g: I\to X$ be paths. Then, $f$ and $g$ are said to be \textit{path homotopic} if there is a continuous function $H: I\times I\to X$ such that $H(s,0) = f(s)$ and $H(s,1) = g(s)$ for all $s\in I$. We denote this by $f\psimeq g$.
\end{definition}

\begin{proposition}
    The relation $\simeq$ on the set of all paths in $X$ is an equivalence relation.
\end{proposition}

\begin{proposition}
    Let $f: I\to X$ be a path and $\varphi: I\to I$ be a continuous function such that $\varphi(0) = 0$ and $\varphi(1) = 1$. Then, $f\psimeq f\circ\varphi$.
\end{proposition}
\begin{proof}
    Define the function $\Phi: I\times I\to X$ by 
    \begin{equation*}
        \Phi(s,t) = f(t\varphi(s) + (1 - t)s)
    \end{equation*}
    It is not hard to see that $\Phi$ is a path homotopy between $f$ and $f\circ\varphi$.
\end{proof}

Consider the set of all equivalence classes of paths in $X$ under the equivalence relation $\psimeq$. Define the operation $*$ on pairs of equivalence classes $[f]$ and $[g]$ where $f(1) = g(0)$ by 
\begin{equation*}
    [f]*[g] = [f*g]
\end{equation*}
where 
\begin{equation*}
    (f*g)(t) =
    \begin{cases}
        f(2t) & 0\le t\le 1/2\\
        g(2t - 1) & 1/2 < t\le 1
    \end{cases}
\end{equation*}

\begin{proposition}
    The operation $*$ is associative. That is, 
    \begin{equation*}
        [f]*([g]*[h]) = ([f]*[g])*h
    \end{equation*}
\end{proposition}
\begin{proof}
    Note that $[f]*([g]*[h])$ is the equivalence class containing the path: 
    \begin{equation*}
        \alpha(t) = 
        \begin{cases}
            f(2t) & 0\le t\le 1/2\\
            g(4t - 2) & 1/2 < t\le 3/4\\
            h(4t - 3) & 3/4 < t\le 1
        \end{cases}
    \end{equation*}
    Consider the piecewise linear function $\varphi: [0,1]\to[0,1]$ that maps $[0,1/2]$ to $[0,1/4]$, $[1/2,3/4]$ to $[1/4,1/2]$ and $[1/2,1]$ to $[3/4,1]$, then through $\alpha\circ\varphi$, the conclusion follows.
\end{proof}

\begin{proposition}
    Let $f: I\to X$ be a path and $\overline f: I\to X$ be given by $\overline f(t) = f(1 - t)$ for $t\in I$. Then $f\ast\overline f$ is path homotopic to the constant path at $x_0$.
\end{proposition}
\begin{proof}
    Define the homotopy 
    \begin{equation*}
        H(s,t) = 
        \begin{cases}
            f(2s) & 0\le s\le\frac{1}{2}(1 - t)\\
            f(1 - t) & \frac{1}{2}(1 - t)\le s\le \frac{1}{2}(1 + t)\\
            \overline f(2s - 1) & \frac{1}{2}(1 + t)\le s\le 1
        \end{cases}.
    \end{equation*}
    Then, $H(\cdot, 0) = f\ast\overline f$ and $H(\cdot, 1)$ is the constant path at $x_0$ which completes the proof.
\end{proof}

\begin{definition}[Fundamental Group]
    Let $\pi_1(X,x_0)$ be the set of equivalence classes of paths $\alpha: I\to X$ with $\alpha(0) = \alpha(1) = x_0$. Then, $\pi_1(X,x_0)$ forms a group under the operation $\ast$. This is known as the \emph{fundamental group} of $X$ based at $x_0$.
\end{definition}

Let $\catTopp$ denote the category of pointed topological spaces, that is, the category wherein objects are pairs $(X,x_0)$ where $x_0\in X$ and a morphism $f:(X,x_0)\to (Y,y_0)$ is a continuous map $f: X\to Y$ with $f(x_0) = y_0$.

\begin{proposition}
    Let $f: (X,x_0)\to (Y,y_0)$ be a morphism in $\catTopp$. Then, the map $f_*:\pi_1(X,x_0)\to\pi_1(Y,y_0)$ given by $[\alpha]\mapsto[f\circ\alpha]$ is a homomorphism of groups. Further, if 
    \begin{equation*}
        (X,x_0)\stackrel{f}{\longrightarrow}(Y,y_0)\stackrel{g}{\longrightarrow}(Z,z_0)
    \end{equation*}
    then $(g\circ f)_* = g_*\circ f_*$.
\end{proposition}
\begin{proof}
    If $H$ is a path homotopy between $\alpha_1$ and $\alpha_2$ in $X$, then $f\circ H$ is a homotopy between $f\circ\alpha_1$ and $f\circ\alpha_2$ in $Y$. Thus, the map $f_*$ is well defined. Next, suppose $[\alpha],[\beta]\in\pi_1(X,x_0)$, then, it is not hard to see that $(f\circ\alpha)*(f\circ\beta) = f\circ(\alpha * \beta)$, consequently, $f_*$ is a homomorphism of groups. The final assertion is obvious from the definition.
\end{proof}

As a result, we see that $\pi_1$ is a (covariant) functor from $\catTopp$ to $\catGrp$.

\begin{theorem}
    Let $X$ be path connected and $x_0,x_1\in X$. Let $\alpha: I\to X$ be a path from $x_0$ to $x_1$. Then, the map $\hat\alpha:\pi_1(X,x_0)\to\pi_1(X,x_1)$ given by $[f]\mapsto[\overline\alpha*f*\alpha]$ is a group isomorphism.
\end{theorem}
\begin{proof}
    It is easy to see that $\hat\alpha$ is a homomorphism. The surjectivity and injectivity of this map are obvious.
\end{proof}

\begin{proposition}
    Let $X$ be path connected and $h: X\to Y$ be a continuous map. If $x_0,x_1\in X$ with $\alpha: I\to X$ a path between them and $\beta = h\circ\alpha$, then we have the following commutative diagram: 
    \begin{equation*}
    \xymatrix {
        \pi_1(X,x_0)\ar[r]^-{(h_{x_0})_*}\ar[d]_{\hat\alpha} & \pi_1(Y,y_0)\ar[d]^{\hat\beta}\\
        \pi_1(X,x_1)\ar[r]^-{(h_{x_1})_*} & \pi_1(Y,y_1)
    }
    \end{equation*}
\end{proposition}
\begin{proof}
    Let $[f]\in\pi_1(X,x_0)$. Then, 
    \begin{equation*}
        \hat\beta\circ(h_{x_0})_*([f]) = \hat\beta([h\circ f]) = [\overline\beta * h\circ f * \beta]
    \end{equation*}
    and 
    \begin{equation*}
        (h_{x_1})_*\circ\hat\alpha([f]) = (h_{x_1})_*([\overline\alpha * f * \alpha]) = [\overline\beta * h\circ f * \beta]
    \end{equation*}
    This completes the proof.
\end{proof}

\section{Retracts and Deformation Retracts}

\begin{definition}
    A \emph{retraction} of a space $X$ onto a subspace $A$ is a map $r: X\to X$ such that $\im(r) = A$ and $r|_A = \id_A$. A \emph{deformation retraction} is a homotopy $H: X\times I\to X$ between $\id_X$ and a retraction $r$ from $X$ onto $A$. That is, $H|_{X\times\{0\}} = \id_X$ and $H|_{X\times\{1\}} = r$. A deformation retract is said to be \emph{strong} if $H|_{A\times\{t\}} = \id_A$ for all $t\in I$.
\end{definition}

\begin{proposition}
    If a space $X$ retracts onto a subspace $A$ and $x_0\in A$, then the homomorphism $i_\ast:\pi_1(A,x_0)\to\pi_1(X,x_0)$ induced by the inclusion $i: A\to X$ is injective. If $A$ isa  deformation retract of $X$, then $i_\ast$ is an isomorphism.
\end{proposition}
\begin{proof}
    Let $r: X\to A$ denote the (restriction of the) retraction of $X$ onto $A$. Then, $r\circ i = \id_A$ whence $r_\ast\circ i_\ast = \id_{\pi_1(A,x_0)}$ whence $i_\ast$ must be injective. 

    Now, let $H: X\times I\to X$ be a deformation retraction of $X$ onto $A$. It suffices to show that $i_\ast$ is surjective. Indeed, let $f: I\to X$ be a loopt based at $x_0$. Then, the map $\Phi: I\times I\to X$ given by $\Phi(s,t) = H(f(s), t)$ is a path homotopy between $f$ and $g = H|_{I\times\{1\}}$. Since $g\in\pi_1(A, x_0)$, we see that $i_*$ must be surjective.
\end{proof}

\begin{definition}[Homotopy Equivalence]
    A continuous map $f: X\to Y$ is said to be a \emph{homotopy equivalence} if there is a continuous map $g: Y\to X$ such that $g\circ f$ is homotopic to $\id_X$ and $f\circ g$ is homotopic to $\id_Y$.
\end{definition}

\section{van Kampen's Theorem}

The following formulation has been taken from \cite{munkrestopology}

\begin{theorem}[van Kampen]\thlabel{thm:van-kampen-version-1}
    Let $X = U\cup V$ where $U$ and $V$ are open in $X$. Further, suppose $U$, $V$ and $U\cap V$ are nonempty and path connected. Let $H$ be a group, $x_0\in U\cap V$ and 
    \begin{equation*}
        \phi_1:\pi_1(U,x_0)\to H\qquad\phi_2:\pi_1(V, x_0)\to H
    \end{equation*}
    be homomorphisms. Finally, let $i_1,i_2,j_1,j_2$ be the homomorphisms of fundamental groups induced by inclusion maps. Then, there is a unique map $\Phi:\pi_1(X,x_0)\to H$ such that the following diagram commutes:
    \begin{equation*}
        \xymatrix {
            & \pi_1(U,x_0)\ar[d]^{j_1}\ar[rd]^{\phi_1}\\
            \pi_1(U\cap V, x_0)\ar[ru]^{i_1}\ar[rd]_{i_2} & \pi_1(X,x_0)\ar@{.>}[r]^-{\Phi} & H\\
            & \pi_1(V,x_0)\ar[ru]_{\phi_2}\ar[u]_{j_2}
        }
    \end{equation*}
\end{theorem}

Notice how the diagram resembles that of a pushout in a general category and hence, has the universal property and hence, the object, if it exists is unique up to a unique isomorphism. In the special case that $U\cap V$ is simply connected, that is, has a trivial fundamental group, the commutative diagram reduces to that of a coproduct. And it is well known that the coproduct in the category of groups is the free product.

\begin{proof}
Let $\mathscr L(U,x_0), \mathscr L(V,x_0), \mathscr L(U\cap V, x_0)$ denote the set of loops in $U$, $V$ and $U\cap V$. The path homotopy class of a path $f$ in $X$, $U$, $V$ and $U\cap V$ is denoted by $[f]$, $[f]_U$, $[f]_V$ and $[f]_{U\cap V}$ respectively. The proof proceeds in multiple steps. The main idea is to first define a set map $\rho$ on the set of loops contained completely in either $U$ or $V$, then extend it to a set map $\sigma$ on the set of paths contained completely in either $U$ or $V$ and finally extend it to a set map $\tau$ on the set of all paths in $X$.

Once the map $\tau$ is defined, we shall show that $\tau(f) = \tau(g)$ whenever $f\psimeq g$ and therefore, $\tau$ would descend to a group homomorphism from $\pi_1(X,x_0)$ to $H$.

\begin{description}
\item[Step 1:] Defining the set map $\rho:\mathscr L(U,x_0)\cup\mathscr L(V,x_0)\to H$.

This has quite a natural definition: 
\begin{equation*}
    \rho(f) = 
    \begin{cases}
        \phi_1([f]_U) & \text{$f$ is contained completely in $U$}\\
        \phi_2([f]_V) & \text{$f$ is contained completely in $V$}
    \end{cases}
\end{equation*}
For a loop contained in $U\cap V$, the map $\rho$ is well defined due to the commutativity of the diagram. It is not hard to see that if $f,g\in\mathscr L(U, x_0)$, then $\rho(f * g) = \rho(f)\rho(g)$.

\item[Step 2:] Extend the map $\rho$ to a map $\sigma:\mathscr P(U)\cup\mathscr P(V)\to H$.

For each $x\in X$, fix a path $\alpha_x$ from $x_0$ to $x$ such that whenever $x$ lies in $U$, $V$ or $U\cap V$, $\alpha_x$ lies completely in $U$, $V$ or $U\cap V$ respectively.

Let $f$ be a path from $x_1$ to $x_2$ that lies completely in $U$ or completely in $V$. Define 
\begin{equation*}
    \sigma(f) = \rho(\alpha_{x_1} * f * \alpha_{x_2}^{-1})
\end{equation*}

Now, let $f$ and $g$ be paths completely contained in $U$. If $f\psimeq g$ in $U$, then $\alpha_{x_1} * f * \alpha_{x_2}^{-1}\psimeq\alpha_{x_1} * g * \alpha_{x_2}^{-1}$ in $U$ and from the definition of $\rho$, we see that 
\begin{equation*}
    \sigma(f) = \rho(\alpha_{x_1} * f * \alpha_{x_2}^{-1}) = \rho(\alpha_{x_1} * g * \alpha_{x_2}^{-1}) = \sigma(g)
\end{equation*}

Next, if $f$ is a path from $x_1$ to $x_2$ and $g$ is a path from $x_2$ to $x_3$ (both contained in $U$), then 
\begin{align*}
    \sigma(f * g) &= \rho(\alpha_{x_1} * f * g * \alpha_{x_3}^{-1})\\
    &= \rho(\alpha_{x_1} * f * \alpha_{x_2}^{-1} * \alpha_{x_2} * g * \alpha_{x_3}^{-1})\\ 
    &= \rho(\alpha_{x_1} * f * \alpha_{x_2}^{-1})\rho(\alpha_{x_2} * g * \alpha_{x_3}^{-1}) = \sigma(f)\sigma(g)
\end{align*}

\item[Step 3:] Extend the map $\sigma$ to a map $\tau:\mathscr P(X)\to H$

Let $f: I\to X$ be a path. It is not hard to argue, using Lebesgue's Number Lemma, that there is a mesh $\delta$ such that for every partition $0 = s_1 < s_2 < \cdots < s_{n - 1} < s_n = 1$ of $[0,1]$ with mesh less than $\delta$, $f([s_{i}, s_{i + 1}])$ is completely contained in either $U$ or $V$ for $0\le i\le n - 1$.

Denote by $f_i$, the restriction of $f$ to $[s_i, s_{i + 1}]$. Define 
\begin{equation*}
    \tau(f, P) = \sigma(f_0)\cdots\sigma(f_{n - 1})
\end{equation*}

We contend that the map $\tau(f,P)$ is independent of the partition chosen, so long as its mesh is less than $\delta$. To do so, we first show that refining a partition with mesh less than $\delta$ does not change the image under $\tau$, for which, it suffices to show that adding a single point to the partition does not change the image. Indeed, let $c\in (s_i, s_{i + 1})$ be added to the partition. But since $f([s_i, c])$ and $f([c,s_{i + 1}])$ lie completely either in $U$ or in $V$, we have that $\sigma(f|_{[s_i, c]})\sigma(f|_{[c,s_{i + 1}]}) = \sigma(f|_{[s_i, s_{i + 1}]})$ whence the conclusion follows.

Now, let $P_1$ and $P_2$ be two partitions of $[0,1]$ with mesh less than $\delta$. Then $P_1\cup P_2$ is a partition that refines both $P_1$ and $P_2$, consequently, 
\begin{equation*}
    \tau(f, P_1) = \tau(f, P_1\cup P_2) = \tau(f, P_2)
\end{equation*}
which establishes our claim.

\item[Step 4:] If $f\psimeq g$ in $X$, then $\tau(f) = \tau(g)$.

Let $F: I\times I\to X$ be a path homotopy between $f$ and $g$. Using the Lebesgue Number Lemma, there are partitions $0 = s_0 < s_1 < \cdots < s_{n - 1} < s_n = 1$ and $0 = t_0 < t_1 < \cdots < t_{m - 1} < t_m = 1$ such that $f([s_i,s_{i + 1}]\times[t_i,t_{i + 1}])$ is completely contained in either $U$ or $V$.

\item[Step 5:] $\tau(f * g) = \tau(f)\tau(g)$

Let $P$ be a partition of $f * g$ such that $(f*g)([s_i,s_{i + 1}])$ is completely contained in either $U$ or $V$. Define $P^* = P\cup\{1/2\}$. It is not hard to see, using $P^*$ that $\tau$ is multiplicative.

\item[Step 6:] Constructing the homomorphism $\Phi$.

Restrict the map $\tau$ to $\tau:\mathscr L(X,x_0)\to H$. From \textbf{Step 4}, it follows that there is a map $\Phi:\pi_1(X,x_0)\to H$ and from \textbf{Step 5}, we get that $\Phi$ is a homomorphism.
\end{description}

The above argument establishes the existence of a group homomorphism $\Phi:\pi_1(X,x_0)\to H$ making the diagram commute. We must now show that the map $\Phi$ is unique. But this follows from the fact that the generators of $\Phi$ are precisely the images of the generators of $\pi_1(U,x_0)$ and $\pi_1(V,x_0)$ under the homomorphisms $j_1$ and $j_2$ respectively.
\end{proof}

\subsection{Alternate Formulation of van Kampen's Theorem}

The following formulation and proof has been taken from \cite{hatcheralgtop}. The upshot of this formulation is that it gives a recipe for computing the presentation of the fundamental group which is hard to see from the previous formulation.

Let $X$ be a topological space and $\{A_\alpha\}_{\alpha\in J}$ be an open cover of path connected subspaces of $X$. Let $x_0\in X$ be a basepoint such that $x_0\in A_\alpha$ for each $\alpha\in J$. The inclusion $A_\alpha\into X$ induces a group homomorphism $j_\alpha: \pi_1(A_\alpha)\to\pi_1(X)$ where we have dropped the basepoint to avoid clutter. Similarly, the inclusion $A_\alpha\cap A_\beta\into A_\alpha$ induces a group homomorphism $i_{\alpha\beta}:\pi_1(A_\alpha\cap A_\beta)\to\pi_1(A_\alpha)$.

Due to the Universal Property of Free Products, the group homomorphisms $j_\alpha$ induce a group homomorphism 
\[
    \Phi:\ast_{\alpha\in J}\pi_1(A_\alpha)\to\pi_1(X).
\]

\begin{proposition}\thlabel{prop:van-kampen-prop-1}
    If each intersection $A_\alpha\cap A_\beta$ is path connected, then $\Phi$ is surjective.
\end{proposition}
\begin{proof}[Sketch of Proof]
    The proof of surjectivity follows the same proof of \textbf{Step2} in the proof of \thref{thm:van-kampen-version-1}. It suffices to show that any element in $\pi_1(X)$ can be represented as the product of finitely many elements of $j_\alpha\left(\pi_1(A_\alpha)\right)$. 

    Take any loop $f: I\to X$ based at $x_0$ and then using the Lebesgue Number Lemma, find a partition $0\le t_0 < \dots < t_n = 1$ of $I$ such that the image $f([t_i, t_{i + 1}])$ is completely contained in some $A_\alpha$ for each $0\le i\le n - 1$. Now, join the endpoints of each such path to $x_0$, which can be done since each $A_\alpha\cap A_\beta$ is path connected. This immediately gives us a decomposition of $[f]$.
\end{proof}

\begin{proposition}
    If in addition to the hypothesis of \thlabel{prop:van-kampen-prop-1}, each intersection $A_\alpha\cap A_\beta\cap A_\gamma$ is path connected, then the kernel of the surjection $\Phi$ is generated by the set 
    \begin{equation*}
        \left\{i_{\alpha\beta}(\omega)i_{\beta\alpha}(\omega)^{-1}\big\vert~\omega\in\pi_1(A_\alpha,A_\beta)\text{ for all }\alpha,\beta\in J\right\}.
    \end{equation*}
\end{proposition}
\begin{proof}
    \todo{Proof of general van kampen}
\end{proof}

\section{Applications of van Kampen's Theorem}

\todo{Applications of van kampen}